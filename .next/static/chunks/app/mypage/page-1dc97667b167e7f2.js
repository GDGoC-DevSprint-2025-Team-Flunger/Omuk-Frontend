(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{6237:(e,a,s)=>{Promise.resolve().then(s.bind(s,1159))},1159:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var l=s(5155),t=s(2115),i=s(2651);s(7866);var n=s(6046);let c=["MILK","EGG","WHEAT","PEANUT","SHELLFISH"],r=["SWEET","SALTY","SOUR","UMAMI","SAVORY","SPICY"],o=["BREAKFAST","LUNCH","DINNER","LATE_NIGHT"],d={SWEET:"단맛",SALTY:"짠맛",SOUR:"신맛",UMAMI:"감칠맛",SAVORY:"고소한맛",SPICY:"매운맛"},m={MILK:"우유",EGG:"달걀",WHEAT:"밀가루",PEANUT:"땅콩",SHELLFISH:"갑각류"},h={BREAKFAST:"아침",LUNCH:"점심",DINNER:"저녁",LATE_NIGHT:"야식"},p=()=>{let[e,a]=(0,t.useState)({name:"",email:"",image:"/images/default_profile.webp"}),[s,p]=(0,t.useState)({likes:[],allergies:[],tastes:[]}),[u,j]=(0,t.useState)([]),[x,g]=(0,t.useState)([]),[N,f]=(0,t.useState)(0),[S,v]=(0,t.useState)(0),[b,y]=(0,t.useState)(!1),[k,A]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=async()=>{try{let e=await i.A.get("http://3.38.114.206:8080/member/1");e.data&&a({name:e.data.name||"",email:e.data.email||""})}catch(e){console.error("회원 정보 불러오기 오류:",e)}},s=async()=>{try{let e=await i.A.get("http://3.38.114.206:8080/member/preference/1");e.data&&p({likes:e.data.time?e.data.time.split(","):[],allergies:e.data.allergy?e.data.allergy.split(","):[],tastes:e.data.taste?e.data.taste.split(","):[]})}catch(e){console.error("음식 기호 불러오기 오류:",e)}},l=async()=>{try{let e=(await i.A.get("http://3.38.114.206:8080/recipe/favorites/1")).data.map(e=>({id:e.id,image:e.imageUrl,name:e.title,link:"/recipe/".concat(e.id)}));j(e)}catch(e){console.error("❌ 즐겨찾기 레시피 가져오기 실패:",e)}},t=JSON.parse(localStorage.getItem("userProfile")||"{}");t.image&&a(e=>({...e,image:t.image})),e(),l(),s()},[]),(0,t.useEffect)(()=>{g(JSON.parse(localStorage.getItem("recentRecipes")||"[]"))},[]),(0,n.useRouter)();let C=s=>{a({...e,[s.target.name]:s.target.value})},E=async()=>{try{let a=await i.A.post("http://3.38.114.206:8080/member",{name:e.name,email:e.email},{headers:{"Content-Type":"application/json"}});console.log("회원 정보 저장 성공:",a.data),y(!1)}catch(e){console.error("회원 정보 저장 중 오류 발생:",e)}},I=()=>{A(!k)},T=(e,a)=>{p(s=>{var l;let t=(null===(l=s[e])||void 0===l?void 0:l.includes(a))?s[e].filter(e=>e!==a):[...s[e]||[],a];return{...s,[e]:t}})},w=async()=>{try{let e={taste:[Array.from(new Set(s.tastes)).join(",")],allergy:[Array.from(new Set(s.allergies)).join(",")],time:[Array.from(new Set(s.likes)).join(",")]},a=await i.A.patch("http://3.38.114.206:8080/member/preference/1",e);console.log("✅ 음식 기호 저장 성공:",a.data),A(!1)}catch(e){console.error("❌ 음식 기호 저장 중 오류 발생:",e)}};return(0,l.jsxs)("div",{className:"mypage-container",children:[(0,l.jsxs)("div",{className:"profile-section",children:[(0,l.jsxs)("div",{className:"profile-left",children:[(0,l.jsxs)("label",{className:"profile-label",children:[(0,l.jsx)("input",{type:"file",className:"file-input",onChange:s=>{var l;let t=null===(l=s.target.files)||void 0===l?void 0:l[0];if(t){let s=new FileReader;s.onload=()=>{let l=s.result,t={...e,image:l};a(t),localStorage.setItem("userProfile",JSON.stringify(t))},s.readAsDataURL(t)}}}),(0,l.jsx)("img",{src:e.image||"/images/default_profile.webp",alt:"Profile",className:"profile-image"})]}),(0,l.jsx)("p",{className:"profile-name",children:e.name})]}),(0,l.jsxs)("div",{className:"profile-right",children:[(0,l.jsxs)("h2",{className:"section-title",children:["회원 정보",(0,l.jsx)("button",{className:"edit-button",onClick:()=>{y(!b)},children:"수정"})]}),b?(0,l.jsxs)("div",{className:"edit-profile",children:[(0,l.jsxs)("p",{children:["이름: ",(0,l.jsx)("input",{type:"text",name:"name",value:e.name,onChange:C})]}),(0,l.jsxs)("p",{children:["이메일: ",(0,l.jsx)("input",{type:"email",name:"email",value:e.email,onChange:C})]}),(0,l.jsx)("button",{className:"save-button",onClick:E,children:"저장"})]}):(0,l.jsxs)("div",{className:"profile-info",children:[(0,l.jsxs)("p",{children:["이름: ",e.name||"이름을 입력해주세요."]}),(0,l.jsxs)("p",{children:["이메일: ",e.email||"이메일을 입력해주세요."]}),(0,l.jsxs)("p",{children:["선호 식사 시간: ",s.likes.length?s.likes.map(e=>h[e]||e).join("  "):"선택 없음"]}),(0,l.jsxs)("p",{children:["선호하는 맛: ",s.tastes.length?s.tastes.map(e=>d[e]||e).join("  "):"선택 없음"]}),(0,l.jsxs)("p",{children:["알레르기 음식: ",s.allergies.length?s.allergies.map(e=>m[e]||e).join("  "):"선택 없음"]})]})]})]}),(0,l.jsx)("div",{className:"food-preferences",children:(0,l.jsx)("button",{className:"button",onClick:I,children:"음식 기호 설정"})}),k&&(0,l.jsx)("div",{className:"modal-overlay",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"선호 식사 시간"}),o.map(e=>(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:s.likes.includes(e),onChange:()=>T("likes",e)})," ",h[e]||e]},e))]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"선호하는 맛"}),r.map(e=>(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:s.tastes.includes(e),onChange:()=>T("tastes",e)})," ",d[e]||e]},e))]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"알레르기 음식"}),c.map(e=>(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:s.allergies.includes(e),onChange:()=>T("allergies",e)})," ",m[e]||e]},e))]}),(0,l.jsx)("button",{className:"button",onClick:w,children:"저장"}),(0,l.jsx)("button",{className:"button cancel",onClick:I,children:"닫기"})]})}),(0,l.jsxs)("div",{className:"recipe-section",children:[(0,l.jsx)("h2",{className:"section-title",children:"\uD83D\uDCCC 즐겨찾기 레시피"}),0===u.length?(0,l.jsx)("p",{className:"empty-message",children:"즐겨찾기 한 레시피가 없습니다!"}):(0,l.jsxs)("div",{className:"recipe-carousel",children:[(0,l.jsx)("button",{className:"carousel-button",onClick:()=>{N-4>=0&&f(N-4)},children:"<"}),(0,l.jsx)("div",{className:"recipe-list",children:u.slice(N,N+4).map((e,a)=>(0,l.jsx)("div",{className:"recipe-card",children:(0,l.jsxs)("a",{href:"/recipe/".concat(e.id),children:[(0,l.jsx)("img",{src:e.image,alt:e.name,className:"recipe-image"}),(0,l.jsx)("p",{children:e.name})]})},a))}),(0,l.jsx)("button",{className:"carousel-button",onClick:()=>{N+4<u.length&&f(N+4)},children:">"})]})]})]})}},7866:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[787,238,441,517,358],()=>a(6237)),_N_E=e.O()}]);